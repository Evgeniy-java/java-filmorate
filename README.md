# java-filmorate application
![filmorate DB ER-diagram](images/filmorate_ER-diagram.png)

## Пояснение к схеме

### movie
Содержание информации о фильмах.
#### Таблица состоит из полей:
+ первичный ключ ```film_id``` - идентификатор фильма;
+ ```name``` - название фильма;
+ ```description``` - описание фильма;
+ ```relese_date``` - год выхода;
+ ```duration``` - продолжительность фильма в минутах;
+ внешний ключ ```genre_id``` - идентификатор жанра;
+ ```reaing``` - возрастной рейтинг, например:
	 - PG - детям рекомендуется смотреть такой фильм с родителями;
	- PG-13 - детям до 13 лет смотреть такой фильм нежелательно.

### genre
Содержит информацию о жанрах кино.
#### В таблицу входят поля:
+ первичный ключ ```genre_id``` - идентификатор жанра;
+ ```name``` - название жанра.

### likes
Содержит информацию о лайках к фильмам которые поставили пользователи.
#### В таблицу входят поля:
+ первичный ключ ```like_id``` - идентификатор лайков;
+ вторичный ключ ```user_id``` - идентификатор пользователя;
+ вторичный ключ ```film_id``` - идентификатор фильма.

### frendlist
Содержит информацию о статусе заявок в друзья.
#### В таблицу входят поля:
+ первичный ключ ```user_id``` - идентификатор пользователя;
+ ```friend_id``` - идентификатор пользователя для дружбы;
+ ```friends_status``` - статус подтверждения добавления в друзья.

### users
Содержит данные о пользователях.
#### Таблица включает поля:
+ первичный ключ ```user_id``` - идентификатор пользователя;
+ ```email``` - электронная почта;
+ ```login``` - имя авторизации пользователя;
+ ```first_name``` - имя пользователя;
+ ```birthday``` - дата рождения пользователя.


##Примеры запросов приложения:
+ Добавить поле genre к таблице movie и вывести информацию о фильмах.
```
SELECT *
FROM movie AS m
INNER JOIN genre AS g ON m.genre_id=g.genre_id;
```

+ Узнать топ 20 фильмов по количеству лайков.
```
SELECT m.name, 
       COUNT(l.user_id) AS count_likes
FROM movie AS m
INNER JOIN likes AS l ON m.film_id=l.film_id
GROUP BY m.name
ORDER BY count_likes DESC
LIMIT 20; 
```
